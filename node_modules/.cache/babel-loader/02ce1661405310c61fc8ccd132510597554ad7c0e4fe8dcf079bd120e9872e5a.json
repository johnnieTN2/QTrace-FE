{"ast":null,"code":"var _jsxFileName = \"/Users/johnulett/Documents/QTrace/QTrace-FE/src/components/QRScanner.js\",\n  _s = $RefreshSig$();\n// src/components/QRScanner.js\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport QrScanner from 'qr-scanner';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst QRScanner = () => {\n  _s();\n  const navigate = useNavigate();\n  const videoRef = useRef(null);\n  const [qrScanner, setQrScanner] = useState(null);\n  const [scanning, setScanning] = useState(false);\n  const [error, setError] = useState('');\n  const [manualBoxId, setManualBoxId] = useState('');\n  useEffect(() => {\n    return () => {\n      if (qrScanner) {\n        qrScanner.stop();\n      }\n    };\n  }, [qrScanner]);\n  const startScanning = async () => {\n    try {\n      setError('');\n      setScanning(true);\n      const scanner = new QrScanner(videoRef.current, result => {\n        console.log('QR Code detected:', result.data);\n        scanner.stop();\n        setScanning(false);\n\n        // Extract box ID from QR code (assuming format like \"BOX-001\" or just \"001\")\n        const boxId = result.data.replace('BOX-', '');\n        navigate(`/MG/JDU/${boxId}`);\n      }, {\n        returnDetailedScanResult: true,\n        highlightScanRegion: true,\n        highlightCodeOutline: true\n      });\n      setQrScanner(scanner);\n      await scanner.start();\n    } catch (err) {\n      console.error('Failed to start camera:', err);\n      setError('Failed to access camera. Please ensure camera permissions are granted.');\n      setScanning(false);\n    }\n  };\n  const stopScanning = () => {\n    if (qrScanner) {\n      qrScanner.stop();\n      setScanning(false);\n    }\n  };\n  const handleManualEntry = () => {\n    if (manualBoxId.trim()) {\n      navigate(`/MG/JDU/${manualBoxId.trim()}`);\n    }\n  };\n  const goToDashboard = () => {\n    navigate('/dashboard');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"qr-scanner\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\uD83D\\uDCE6 QR Box Tracker\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Scan a QR code to track your moving box\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"scanner-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        className: \"scanner-video\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"scanner-controls\",\n        children: !scanning ? /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: startScanning,\n          className: \"scan-button\",\n          children: \"\\uD83D\\uDCF8 Start Scanning\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: stopScanning,\n          className: \"stop-button\",\n          children: \"\\u23F9\\uFE0F Stop Scanning\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"manual-entry\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Or enter box number manually:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"manual-input\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: manualBoxId,\n          onChange: e => setManualBoxId(e.target.value),\n          placeholder: \"Enter box ID (e.g., 001)\",\n          onKeyPress: e => e.key === 'Enter' && handleManualEntry()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleManualEntry,\n          disabled: !manualBoxId.trim(),\n          children: \"Go to Box\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-link\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: goToDashboard,\n        className: \"dashboard-button\",\n        children: \"\\uD83D\\uDCCA View Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n};\n_s(QRScanner, \"KV6RpQ+8mkyH+qLuSxlWcYjD7Js=\", false, function () {\n  return [useNavigate];\n});\n_c = QRScanner;\nexport default QRScanner;\nvar _c;\n$RefreshReg$(_c, \"QRScanner\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useNavigate","QrScanner","jsxDEV","_jsxDEV","QRScanner","_s","navigate","videoRef","qrScanner","setQrScanner","scanning","setScanning","error","setError","manualBoxId","setManualBoxId","stop","startScanning","scanner","current","result","console","log","data","boxId","replace","returnDetailedScanResult","highlightScanRegion","highlightCodeOutline","start","err","stopScanning","handleManualEntry","trim","goToDashboard","className","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","onClick","type","value","onChange","e","target","placeholder","onKeyPress","key","disabled","_c","$RefreshReg$"],"sources":["/Users/johnulett/Documents/QTrace/QTrace-FE/src/components/QRScanner.js"],"sourcesContent":["// src/components/QRScanner.js\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport QrScanner from 'qr-scanner';\n\nconst QRScanner = () => {\n  const navigate = useNavigate();\n  const videoRef = useRef(null);\n  const [qrScanner, setQrScanner] = useState(null);\n  const [scanning, setScanning] = useState(false);\n  const [error, setError] = useState('');\n  const [manualBoxId, setManualBoxId] = useState('');\n\n  useEffect(() => {\n    return () => {\n      if (qrScanner) {\n        qrScanner.stop();\n      }\n    };\n  }, [qrScanner]);\n\n  const startScanning = async () => {\n    try {\n      setError('');\n      setScanning(true);\n\n      const scanner = new QrScanner(\n        videoRef.current,\n        (result) => {\n          console.log('QR Code detected:', result.data);\n          scanner.stop();\n          setScanning(false);\n          \n          // Extract box ID from QR code (assuming format like \"BOX-001\" or just \"001\")\n          const boxId = result.data.replace('BOX-', '');\n        navigate(`/MG/JDU/${boxId}`);\n        },\n        {\n          returnDetailedScanResult: true,\n          highlightScanRegion: true,\n          highlightCodeOutline: true,\n        }\n      );\n\n      setQrScanner(scanner);\n      await scanner.start();\n    } catch (err) {\n      console.error('Failed to start camera:', err);\n      setError('Failed to access camera. Please ensure camera permissions are granted.');\n      setScanning(false);\n    }\n  };\n\n  const stopScanning = () => {\n    if (qrScanner) {\n      qrScanner.stop();\n      setScanning(false);\n    }\n  };\n\n  const handleManualEntry = () => {\n    if (manualBoxId.trim()) {\n    navigate(`/MG/JDU/${manualBoxId.trim()}`);\n    }\n  };\n\n  const goToDashboard = () => {\n    navigate('/dashboard');\n  };\n\n  return (\n    <div className=\"qr-scanner\">\n      <div className=\"header\">\n        <h1>üì¶ QR Box Tracker</h1>\n        <p>Scan a QR code to track your moving box</p>\n      </div>\n\n      <div className=\"scanner-container\">\n        <video ref={videoRef} className=\"scanner-video\"></video>\n        \n        {error && (\n          <div className=\"error-message\">\n            {error}\n          </div>\n        )}\n\n        <div className=\"scanner-controls\">\n          {!scanning ? (\n            <button onClick={startScanning} className=\"scan-button\">\n              üì∏ Start Scanning\n            </button>\n          ) : (\n            <button onClick={stopScanning} className=\"stop-button\">\n              ‚èπÔ∏è Stop Scanning\n            </button>\n          )}\n        </div>\n      </div>\n\n      <div className=\"manual-entry\">\n        <h3>Or enter box number manually:</h3>\n        <div className=\"manual-input\">\n          <input\n            type=\"text\"\n            value={manualBoxId}\n            onChange={(e) => setManualBoxId(e.target.value)}\n            placeholder=\"Enter box ID (e.g., 001)\"\n            onKeyPress={(e) => e.key === 'Enter' && handleManualEntry()}\n          />\n          <button onClick={handleManualEntry} disabled={!manualBoxId.trim()}>\n            Go to Box\n          </button>\n        </div>\n      </div>\n\n      <div className=\"dashboard-link\">\n        <button onClick={goToDashboard} className=\"dashboard-button\">\n          üìä View Dashboard\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default QRScanner;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}